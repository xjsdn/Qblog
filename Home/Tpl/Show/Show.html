<load file="Common/head.html" />
<body class="single single-post single-format-standard article-29">
<load file="Common/header.html" />
<div id="zan-bodyer" style="padding-top: 30px;">
  <div class="container">
    <section class="row">
      <div class="col-md-8">
        <article class="article container well"> 
          <!-- 面包屑 -->
          <div class="breadcrumb"> <i class="fa fa-home"></i> <!-- Breadcrumb NavXT 4.4.0 --> 
            <a title="Go to Zanblog." href="http://www.yeahzan.com/zanblog" class="home">Zanblog</a> / WordPress主题文件的调用顺序 </div>
          <!-- 面包屑 --> 
          <!-- 大型设备文章属性 -->
          <div class="hidden-xs">
            <div class="title-article">
              <h1><a href="114.html">WordPress主题文件的调用顺序</a></h1>
            </div>
            <div class="tag-article container"> <span class="label label-zan"><i class="fa fa-tags"></i> 7-06</span> <span class="label label-zan"><i class="fa fa-tags"></i> <a href="http://www.yeahzan.com/zanblog/archives/category/wordpress" title="查看WordPress中的全部文章" rel="category tag">WordPress</a></span> <span class="label label-zan"><i class="fa fa-user"></i> <a href="http://www.yeahzan.com/zanblog/archives/author/yeahzan" title="由佚站互联发布" rel="author">佚站互联</a></span> <span class="label label-zan"><i class="fa fa-eye"></i> 700人</span> </div>
          </div>
          <!-- 大型设备文章属性 --> 
          <!-- 小型设备文章属性 -->
          <div class="visible-xs">
            <div class="title-article">
              <h4><a href="114.html">WordPress主题文件的调用顺序</a></h4>
            </div>
            <p> <i class="fa fa-calendar"></i> 07-06 <i class="fa fa-eye"></i> 700人 </p>
          </div>
          <!-- 小型设备文章属性 -->
          <div class="centent-article">
            <figure class="thumbnail hidden-xs"><img width="730" height="292" src="../wp-content/uploads/2013/09/car_2.jpg" class="attachment-730x300 wp-post-image" alt="Wordpress主题文件的调用顺序" title="Wordpress主题文件的调用顺序" /></figure>
            <p>
            <p>本文将展示主题文件执行的层次结构。简而言之,当你加载一个页面时，我们要看看哪些模板文件被执行。您可能已经知道单篇日志是用single.php解析的。单个页面是加载page.php来render的。但WordPress将根据各种实际情况来寻找不同的模板文件,因此，这里，我们就要看看这是如何工作的。</p>
            <p>我们首先应该清楚这一点:没有 index.php和 style.css你的主题已经不再是一个有效的WP主题…所以理所当然,如果你只有这两个文件,每一个网页被render时WP都将试图加载index.php。各位客观且快速浏览一眼下面这个“cheatsheet”来看看我所指的:<br />
              <a href="../wp-content/uploads/2013/07/TemplateMap.jpg"><img class="thumbnail" alt="TemplateMap" src="../wp-content/uploads/2013/07/TemplateMap.jpg" width="940" height="690" /></a><br />
              （ps:这个图应该从上至下，从左往右看。）</p>
            <p>注意一下每个页面类型的执行流程都将在index.php终结。这就是为什么index.php是每一个WordPress主题所必须的文件。如果我们在WP主题中遗漏任何其他文件(例如,如果没有“search.php”),WP会自动调用index.php。</p>
            <p>现在让我们来看看一些执行顺序的细节问题。<br />
              我要向你们展示WP在你当前活动主题文件夹中搜索文件的流程。<br />
              当你打算从现在开始创造一个WordPress主题的话，我希望这将会是有用的:<br />
              我将会向你展示每一类型的文件执行的层次。</p>
            <hr />
            <h3>首页</h3>
            <p>对于每一个网站，这是第一,也是最重要的一个页面。所以WP提供了极大的范围来让你定制这个页面。让我们看看这个用于显示首页的文件的层次。</p>
            <blockquote>
              <ol>
                <li>front-page.php</li>
                <li>home.php</li>
                <li>index.php</li>
              </ol>
            </blockquote>
            <p>当客户端请求主页时,WP将搜索front-page.php。 如果不存在,它将会使用home.php。如果 home.php存在,它会用到它。否则,它会默认采用index.php。</p>
            <h3>单篇日志</h3>
            <blockquote>
              <ol>
                <li>single-<strong>[post-type]</strong>.php</li>
                <li>single.php</li>
                <li>index.php</li>
              </ol>
            </blockquote>
            <p>只要你需要，WordPress可以有各种日志类型。这将会更容易使得所有/一些日志类型可以有不同的设计。默认情况下“post”是WP主要和默认的日志类型。</p>
            <p>这样，举例来说,如果你的自定义日志类型是 product ,那么它的模板将会是single-product.php</p>
            <p>了解更多如何添加新日志类型,你可以参考<a href="http://ihacklog.com/l.php?url=http%3A%2F%2Fcodex.wordpress.org%2FFunction_Reference%2Fregister_post_type" target="_blank">这个链接</a>。</p>
            <h3>单个静态页面</h3>
            <p>其实这个在WP里面就叫page,这里翻译成中文后反倒不好分清了。</p>
            <blockquote>
              <ol>
                <li><strong>[custom-template]</strong>.php</li>
                <li>page-<strong>[slug]</strong>.php</li>
                <li>page-<strong>[id]</strong>.php</li>
                <li>page.php</li>
                <li>index.php</li>
              </ol>
            </blockquote>
            <p>与post类型一样,类型,我们可以使用自定义页模板让page类型的页面有不同的页面布局。WP首先搜索指定的页面模板文件(如果存在)。</p>
            <p>如果没有找到,它将寻找带有当前页面别名(slug)的模板文件。基本上,如果别名是aboutus,那么它将在当前主题文件夹中搜索文件page-aboutus.php。</p>
            <p>WP将像搜索别名页面模板一样搜索文件ID模板。</p>
            <h3>分类</h3>
            <blockquote>
              <ol>
                <li>category-<strong>[slug]</strong>.php</li>
                <li>category-<strong>[id]</strong>.php</li>
                <li>category.php</li>
                <li>archive.php</li>
                <li>index.php</li>
              </ol>
            </blockquote>
            <p>我相信，如果你已经看完了上面的话，这里应该不用我解释了。文件搜索规则是一样的。</p>
            <h3>标签</h3>
            <blockquote>
              <ol>
                <li>tag-<strong>[slug]</strong>.php</li>
                <li>tag-<strong>[id]</strong>.php</li>
                <li>tag.php</li>
                <li>archive.php</li>
                <li>index.php</li>
              </ol>
            </blockquote>
            <h3>其它分类（Taxonomy）</h3>
            <blockquote>
              <ol>
                <li>taxonomy-<strong>[tax]</strong>-<strong>[term]</strong>.php</li>
                <li>taxonomy-<strong>[tax]</strong>.php</li>
                <li>taxonomy.php</li>
                <li>archive.php</li>
                <li>index.php</li>
              </ol>
            </blockquote>
            <p>这里原文并没有做多少解释。但个人觉得这里要稍微解释下。什么是taxonomy?它的英文意思很简单，就是“分类”。但是在WP里面仅这么说的话，我相应很多人还是会一头雾水。还有，什么是term ? term 的英文意思是术语。<br />
              在WP里面，term可以是post_tag(日志标签)、link_category（链接类别）、category(日志分类）及任何其它自定义的分类。例如，自定义了一个名为book(书籍，自定义日志类型）的日志类型，可以把 writer(作家)作为taxonomy ,那么作家的名字，如 hanhan (韩寒），就是term之一，一个taxonomy下可以有很多term.也就是说，taxonomy是term的一个集合。这样，我们就可以有taxonomy-writer-hanhan.php 作为显示韩寒的书籍分类页面的模板，taxonomy-writer.php 作为显示书籍分类的模板。</p>
            <h3>作者</h3>
            <blockquote>
              <ol>
                <li>author-<strong>[author-nicname]</strong>.php</li>
                <li>author-<strong>[author-id]</strong>.php</li>
                <li>author.php</li>
                <li>archive.php</li>
                <li>index.php</li>
              </ol>
            </blockquote>
            <h3>附件</h3>
            <blockquote>
              <ol>
                <li><strong>[mime-type]</strong>.php</li>
                <li>attachment.php</li>
                <li>single.php</li>
                <li>index.php</li>
              </ol>
            </blockquote>
            <h3>日期</h3>
            <blockquote>
              <ol>
                <li>date.php</li>
                <li>archive.php</li>
                <li>index.php</li>
              </ol>
            </blockquote>
            <h3>存档</h3>
            <blockquote>
              <ol>
                <li>archive.php</li>
                <li>index.php</li>
              </ol>
            </blockquote>
            <h3>搜索</h3>
            <blockquote>
              <ol>
                <li>search.php</li>
                <li>index.php</li>
              </ol>
            </blockquote>
            <p>搜索模板用于显示搜索结果。</p>
            <h3>404页面</h3>
            <blockquote>
              <ol>
                <li>404.php</li>
                <li>index.php</li>
              </ol>
            </blockquote>
            <h3>结论</h3>
            <p>显然你可以使用这些知识在广泛的方法不同为各种类型的页面加载自定义模板…在很多情况下,即使你在使用一个现有的主题,你仍可以在不改变现有模板文件的情况下得到一个定制的解决方案。你只是需要创建新文件,并按照上述规则指定一个新的名字。</p>
            <p>分享你的想法和任何可以包含以上的层次结构的附加文件。</p>
            <hr />
            <h3>后话</h3>
            <p>也话有朋友会说，你这个文章中列的文件不完整，不是还有 comments.php 和 comments-popup.php 吗？是的，对于一个标准的主题，这是应该有的。不过，本文不是在讨论WP主题应该有哪些文件，而是讨论主题文件的执行顺序问题，归根结底，comments.php 和 comments-popup.php 不是被WP直接调用的，而是由主题制作者自行调用的（由single.php或page.php调用<strong>&lt;?php comments_template(); ?&gt;</strong>）。因此，原作者在这里没有列出comments.php 和 comments-popup.php 我想也是完全合理的。</p>
            <p>本文转载自  ihacklog.com</p>
            </p>
            <!-- 分页 -->
            <div clas="zan-page bs-example">
              <ul class="pager">
                <li class="previous"></li>
                <li class="next"><a href="http://www.yeahzan.com/zanblog/archives/125.html" rel="next">下一篇</a></li>
              </ul>
            </div>
            <!-- 分页 --> 
            <!-- 文章版权信息 -->
            <div class="copyright alert alert-success">
              <p>版权属于：<a href="http://www.yeahzan.com/">佚站互联</a> - <a href="http://www.yeahzan.com/">杭州网站建设</a></p>
              <p>原文地址：<a href="114.html">http://www.yeahzan.com/zanblog/archives/114.html</a></p>
              <p>转载时必须以链接形式注明原始出处及本声明。</p>
            </div>
            <!-- 文章版权信息 --> 
            <!-- Baidu Button BEGIN -->
            <div id="bdshare" class="bdshare_b pull-right" style="line-height: 12px;"> <img src="../../../bdimg.share.baidu.com/static/images/type-button-1.jpg~cdnversion=20120831.jpg" /> <a class="shareCount"></a> </div>
            <script type="text/javascript" id="bdshare_js" data="type=button&amp;uid=6553914" ></script> 
            <script type="text/javascript" id="bdshell_js"></script> 
            <script type="text/javascript">
						document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + Math.ceil(new Date()/3600000);
						</script> 
            <!-- Baidu Button END --> 
          </div>
        </article>
        <!-- 相关文章 -->
        <div id="post-related" class="bs-example visible-md visible-lg">
          <div class="row">
            <div class="alert alert-danger related-title">您可能也喜欢:</div>
            <div class="col-md-4">
              <div class="thumbnail">
                <div class="caption">
                  <p class="post-related-title"><a href="http://www.yeahzan.com/zanblog/archives/575.html" rel="bookmark" title="Zanblog 2.0.4 版本更新">Zanblog 2.0.4 版本更新</a></p>
                  <p class="post-related-content">HI，Zanblog再次更新了。
                    我们希望Zanblog能够满足大多数朋友对于博客的需求，所以我们会尽可能根据大家的反馈再对主题进行修改。
                    让我们一起看看 2.0.4 版本...</p>
                  <p><a class="btn btn-danger pull-right read-more" href="http://www.yeahzan.com/zanblog/archives/575.html"  title="详细阅读 Zanblog 2.0.4 版本更新">阅读全文</a></p>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="thumbnail">
                <div class="caption">
                  <p class="post-related-title"><a href="http://www.yeahzan.com/zanblog/archives/125.html" rel="bookmark" title="非插件实现WordPress分页功能">非插件实现WordPress分页功能</a></p>
                  <p class="post-related-content">为了性能考虑，减少WordPress主题中插件的使用是非常有必要的，所以如果使用代码就能解决的问题，就尽量不采用插件。Zanblog的分页功能便是采用了函数来实现...</p>
                  <p><a class="btn btn-danger pull-right read-more" href="http://www.yeahzan.com/zanblog/archives/125.html"  title="详细阅读 非插件实现WordPress分页功能">阅读全文</a></p>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="thumbnail">
                <div class="caption">
                  <p class="post-related-title"><a href="http://www.yeahzan.com/zanblog/archives/121.html" rel="bookmark" title="如何用Bootstrap制作WordPress主题">如何用Bootstrap制作WordPress主题</a></p>
                  <p class="post-related-content">在本教程中，我们将学习如何用Bootstrap制作我们自己的响应式的WordPress主题。Bootstrap是一个响应式的框架，用来创建web网站和应用，用它创建一个响应式的W...</p>
                  <p><a class="btn btn-danger pull-right read-more" href="http://www.yeahzan.com/zanblog/archives/121.html"  title="详细阅读 如何用Bootstrap制作WordPress主题">阅读全文</a></p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <a name="comments"></a>
        <div class="ds-thread" data-thread-key="114" data-author-key="3" data-title="Wordpress主题文件的调用顺序" data-url="http://www.yeahzan.com/zanblog/archives/114.html"></div>
        <script type="text/javascript">
	if (typeof DUOSHUO !== 'undefined')
		DUOSHUO.EmbedThread('.ds-thread');
</script>
        <div id="ds-ssr">
          <ol id="commentlist">
            <li class="comment even thread-even depth-1" id="li-comment-768">
              <article id="comment-768" class="comment">
                <footer class="comment-meta"> <cite class="comment-author vcard"> <span class="fn">ppp</span> on <a rel="nofollow" href="http://www.yeahzan.com/zanblog/archives/114.html#comment-768">
                  <time pubdate datetime="2013-10-25T11:59:56+00:00">2013/10/25 at 11:59</time>
                  </a> <span class="says">said:</span> </cite><!-- .comment-author .vcard --> 
                </footer>
                <div class="comment-content">
                  <p>这个模版不显示日期呀。</p>
                </div>
              </article>
              <!-- #comment-## -->
              <ul class="children">
                <li class="comment odd alt depth-2" id="li-comment-769">
                  <article id="comment-769" class="comment">
                    <footer class="comment-meta"> <cite class="comment-author vcard"> <span class="fn"><a href='http://t.qq.com/ketuseo' rel='external nofollow' class='url'>ketu</a></span> on <a rel="nofollow" href="http://www.yeahzan.com/zanblog/archives/114.html#comment-769">
                      <time pubdate datetime="2013-10-25T12:40:03+00:00">2013/10/25 at 12:40</time>
                      </a> <span class="says">said:</span> </cite><!-- .comment-author .vcard --> 
                    </footer>
                    <div class="comment-content">
                      <p>请仔细看一下，主题上是有日期的</p>
                    </div>
                  </article>
                  <!-- #comment-## --> 
                </li>
                <!-- #comment-## -->
              </ul>
              <!-- .children --> 
            </li>
            <!-- #comment-## -->
          </ol>
        </div>
      </div>
    <load file="Common/sidebar.html" />
    </section>
  </div>
</div>
<load file="Common/footer.html" />
</body>
</html>